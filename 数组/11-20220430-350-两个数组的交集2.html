<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var intersect = function (nums1, nums2) {
        let map = new Map();
        let res = [];
        for (let num1 of nums1) {
          if (map.has(num1)) {
            let count = map.get(num1);
            map.set(num1, ++count);
          } else {
            map.set(num1, 1);
          }
        }

        for (let num2 of nums2) {
          let count = map.get(num2);
          if (map.has(num2) && count > 0) {
            map.set(num2, --count);
            res.push(num2);
          }
        }
        return res;
      };
      var res = intersect([1, 2, 2, 2, 1], [2, 2, 2, 2]); // [2,2]
      // var res = intersect([4, 9, 5], [9, 4, 9, 8, 4]); // [4,9]

      console.log("res===", res);
    </script>
  </body>
</html>
